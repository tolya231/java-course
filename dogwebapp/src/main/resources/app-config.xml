<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="inMemoryDogDao" class="com.epam.repositories.inMemory.InMemoryDogDao"/>

  <bean id="jdbcDogDao" class="com.epam.repositories.jdbcDao.JdbcDogDao">
    <constructor-arg ref="h2dataSource"/>
  </bean>

  <bean id="h2dataSource" class="org.h2.jdbcx.JdbcDataSource" depends-on="h2Server">
    <property name="URL" value="jdbc:h2:mem:prod;DB_CLOSE_DELAY=-1;DATABASE_TO_LOWER=TRUE"/>
    <property name="user" value="admin"/>
    <property name="password" value="admin"/>
  </bean>

  <bean id="flyway" class="org.flywaydb.core.Flyway" init-method="migrate">
    <property name="baselineOnMigrate" value="true" />
    <property name="dataSource" ref="h2dataSource" />
  </bean>

  <!--h2-console-->
  <bean id="h2Server" class="org.h2.tools.Server" factory-method="createTcpServer"
    init-method="start"
    destroy-method="stop" depends-on="h2WebServer">
    <constructor-arg value="-tcp,-tcpAllowOthers,-tcpPort,9092"/>
  </bean>
  <bean id="h2WebServer" class="org.h2.tools.Server" factory-method="createWebServer"
    init-method="start"
    destroy-method="stop">
    <constructor-arg value="-web,-webAllowOthers,-webPort,8082"/>
  </bean>

</beans>
